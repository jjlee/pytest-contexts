sudo: false
language: python
matrix:
  include:
  - python: 3.6
    env: TOX_ENV=py36
  - python: 3.6
    env: TOX_ENV=flake8
  - python: 3.7
    env: TOX_ENV=py37
    sudo: required
    dist: xenial
install:
- pip install tox
script:
- tox -e $TOX_ENV
before_cache:
- rm -rf $HOME/.cache/pip/log
cache:
  directories:
  - "$HOME/.cache/pip"
deploy:
  provider: pypi
  user: madedotcom
  password:
    secure: o+Nw06Rv0L2h+pqzSbD5Hl0QJeVOVNKFkIsA2MAXW1Zbm2yf2z88zlMpTUWs4dkcdN5XFzeVwVK49RYrIfq0MK2abNyT8rIk+D/mIDfXy/NWyNq7AwHoQSlzND+GS69B9VcVn5slfaYdUkpX2E9pF8EM4ea6Oop30ecnJIkLVnSpUI8b7qcKm6XKg+s3NckQCxnEjEPqHMgkSHvqRh306mWeXryx83ueU9lazUVn+mbUGYf6/ENiqoe1A53qxZXPwNyXRhM9nGQU3fPCezAvwMjiFgeKBoAuRiAQCiJPNwIqYFtz4478ICSxIt6cFwIuK3R1YkC2+o6Rbr9JBeF85m2DCTB16w9Qakfl+CLiXVxGDsmX32E1W99JKM1hd/NqaaREYkMpzmk3dkxHLcCbqkE3uBNvxZ1X/eLB8CM9QuTbHbuObrSF1dXmSZd4g7HIVSbVumIXQMLlGGsOqKWdHhtjXjkBOJQd21s+o5yqw7r/al2ejoLBuEu6as9cHKsS6nSaNwCwNsWJDY9wnSxe9ygEYK4jZPMeuBilNtzueciSiOe5c/e0h/MzFP+32o9Lx5I1zNvbiBDRh2oSYd5DIWzf3uPAOFf4zPfovDMiCzgxgL2O+Fyg/of+KIiwR1CBzQDwg9m2Vx4MkmO0jDu9Lbgru79ndk3cdVwbEIkeeyg=
  on:
    condition: "$TOX_ENV = py37"
